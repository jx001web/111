{"version":3,"sources":["context/AuthContext.js","components/Profile/Profile.js","components/Layout/Navbar.js","images/banner-image.png","components/Home/Home.js","components/Auth/Login.js","components/Auth/Register.js","components/Items/ItemForm.js","components/Items/ItemDetail.js","components/Favorites/FavoritesList.js","components/Cart/Cart.js","components/Discover/DiscoverPage.js","components/Profile/AccountSettings.js","components/Items/MyPurchasedItems.js","components/Messages/Messages.js","App.js","reportWebVitals.js","index.js"],"names":["AuthContext","createContext","AuthProvider","_ref","children","user","setUser","useState","loading","setLoading","message","setMessage","useEffect","storedUser","localStorage","getItem","token","JSON","parse","_jsx","Provider","value","login","userData","setItem","stringify","logout","removeItem","updateUser","useAuth","useContext","useStyles","makeStyles","theme","root","backgroundColor","minHeight","paddingTop","spacing","paddingBottom","container","maxWidth","profileSection","borderRadius","padding","boxShadow","borderBottom","avatar","width","height","margin","marginBottom","palette","primary","main","fontSize","username","fontWeight","color","email","balanceSection","balanceIcon","marginRight","balanceAmount","marginTop","newItemButton","textTransform","dark","contentSection","overflow","tabs","itemCard","transition","transform","itemImage","backgroundSize","backgroundPosition","itemContent","itemTitle","itemDescription","price","dateText","itemActions","display","justifyContent","gap","borderTop","actionButton","deleteButton","error","dialog","dialogTitle","dialogContent","dialogActions","loadingContainer","alignItems","noItems","textAlign","favoriteCard","favoriteButton","balanceCard","shape","cursor","flexDirection","text","secondary","Profile","classes","history","useHistory","userItems","setUserItems","tabValue","setTabValue","deleteDialogOpen","setDeleteDialogOpen","itemToDelete","setItemToDelete","favorites","setFavorites","loadingFavorites","setLoadingFavorites","balance","setBalance","fetchUserItems","fetchUserBalance","async","response","fetch","concat","id","data","json","console","headers","fetchFavorites","Container","className","Typography","variant","align","ok","Box","_jsxs","Grid","item","xs","md","Fade","in","timeout","Paper","elevation","Avatar","charAt","toUpperCase","AccountBalanceWalletIcon","toFixed","Button","onClick","handleNewItem","push","startIcon","AddIcon","Tabs","onChange","handleTabChange","event","newValue","indicatorColor","textColor","centered","Tab","label","Divider","p","CircularProgress","style","length","map","sm","backgroundImage","image","title","description","Date","createdAt","toLocaleDateString","IconButton","_id","size","EditIcon","handleDeleteClick","DeleteIcon","itemId","method","filter","handleRemoveFavorite","FavoriteIcon","Dialog","open","onClose","DialogTitle","DialogContent","DialogActions","flexGrow","appBar","toolbar","logo","textDecoration","logoText","letterSpacing","navLinks","navLink","publishButton","iconSection","marginLeft","iconButton","badge","border","menuItem","minWidth","menuDivider","Navbar","_user$username","unreadCount","setUnreadCount","anchorEl","setAnchorEl","React","handleMenuClose","fetchUnreadCount","count","interval","setInterval","clearInterval","log","AppBar","position","Toolbar","Link","to","src","process","alt","_Fragment","component","ShoppingCartIcon","Badge","badgeContent","MailIcon","currentTarget","Menu","Boolean","TransitionComponent","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","PaperProps","MenuItem","handleLogout","banner","bannerImage","bannerContent","zIndex","searchContainer","search","searchInput","flex","filterSection","flexWrap","filterChip","itemMedia","cardActions","buyButton","sortSelect","categoryTitle","categories","Home","items","setItems","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","sortBy","setSortBy","setError","fetchItems","Error","filteredItems","category","toLowerCase","includes","sort","a","b","err","gutterBottom","onSubmit","preventDefault","SearchIcon","InputBase","placeholder","e","target","type","Chip","FormControl","Select","startAdornment","SortIcon","lg","Card","CardMedia","CardContent","noWrap","textOverflow","WebkitLineClamp","WebkitBoxOrient","toLocaleString","CardActions","handleViewItem","fullWidth","paper","form","submit","Login","formData","setFormData","password","timer","setTimeout","clearTimeout","handleChange","_objectSpread","name","success","body","TextField","required","autoFocus","Register","confirmPassword","setSuccess","formControl","imagePreview","maxHeight","objectFit","ItemForm","setImage","preview","setPreview","formDataToSend","FormData","append","multiline","rows","InputLabel","accept","file","files","URL","createObjectURL","htmlFor","whiteSpace","seller","buttonGroup","ItemDetail","_item$price","useParams","isFavorite","setIsFavorite","isEditing","setIsEditing","editFormData","setEditFormData","fetchItem","checkFavorite","errorData","alert","disabled","handleContactSeller","selectedUser","FavoriteBorderIcon","updatedItem","card","cardMedia","cardContent","noFavorites","FavoritesList","handleItemClick","totalSection","checkoutButton","dialogPrice","Cart","cartItems","setCartItems","openCheckoutDialog","setOpenCheckoutDialog","fetchCartItems","calculateTotal","reduce","total","handleRemoveFromCart","Snackbar","autoHideDuration","formatTimeAgo","date","seconds","Math","floor","sectionTitle","priceIcon","light","sellerInfo","background","default","timeChip","divider","emptyMessage","DiscoverPage","newItems","setNewItems","oneHourAgo","now","recentItems","mb","TimelapseIcon","LocalOfferIcon","submitButton","AccountSettings","currentPassword","newPassword","undefined","prev","pageTitle","orderInfo","status","orderTime","emptyContainer","OrderPage","orders","setOrders","fetchOrders","ShoppingBasketIcon","order","_order$item$price","statusChip","userList","chatBox","messageList","overflowY","messageInput","myMessage","otherMessage","messageTime","Messages","messagesEndRef","useRef","users","setUsers","setSelectedUser","messages","setMessages","newMessage","setNewMessage","unreadCounts","setUnreadMessages","u","fetchUsers","fetchMessages","handleSendMessage","trim","receiverId","content","prevMessages","List","ListItem","button","selected","ListItemAvatar","overlap","ListItemText","ml","bgcolor","px","_message$sender","isMyMessage","sender","alignSelf","ref","onKeyPress","key","shiftKey","mt","createTheme","typography","fontFamily","join","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","lineHeight","body2","shadows","overrides","MuiButton","contained","MuiPaper","rounded","elevation1","MuiCard","App","ThemeProvider","CssBaseline","Router","Switch","Route","exact","path","MyPurchasedItems","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e050fc1e.chunk.js","sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    // 检查本地存储中是否有用户信息\r\n    const storedUser = localStorage.getItem('user');\r\n    const token = localStorage.getItem('token');\r\n    \r\n    if (storedUser && token) {\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const login = (userData, token) => {\r\n    setUser(userData);\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n    localStorage.setItem('token', token);\r\n    setMessage('登录成功！');\r\n  };\r\n\r\n// 添加 updateUser 函数\r\nconst updateUser = (userData) => {\r\n  setUser(userData);\r\n  localStorage.setItem('user', JSON.stringify(userData));\r\n};\r\n  const logout = () => {\r\n    setUser(null);\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('token');\r\n    setMessage('已经安全退出！');\r\n  };\r\n// 添加更新用户信息的函数\r\n  const updateUserInfo = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/users/me', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const userData = await response.json();\r\n        setUser(userData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating user info:', error);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    setUser,\r\n    updateUserInfo  // 添加到 context 中\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, logout, loading, message, setMessage,updateUser }}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Grid,\r\n  Paper,\r\n  Typography,\r\n  makeStyles,\r\n  Avatar,\r\n  Tabs,\r\n  Tab,\r\n  Button,\r\n  Divider,\r\n  Box,\r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  CircularProgress,\r\n  Fade,\r\n} from '@material-ui/core';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useHistory } from 'react-router-dom';\r\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: '#ffffff',\r\n    minHeight: '100vh',\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  container: {\r\n    maxWidth: 1200,\r\n  },\r\n  profileSection: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: 16,\r\n    padding: theme.spacing(4),\r\n    boxShadow: 'none',\r\n    borderBottom: '1px solid #f0f0f0',\r\n  },\r\n  avatar: {\r\n    width: 100,\r\n    height: 100,\r\n    margin: '0 auto',\r\n    marginBottom: theme.spacing(2),\r\n    backgroundColor: theme.palette.primary.main,\r\n    fontSize: '2rem',\r\n  },\r\n  username: {\r\n    fontWeight: 600,\r\n    fontSize: '1.5rem',\r\n    color: '#1a1a1a',\r\n    marginBottom: theme.spacing(0.5),\r\n  },\r\n  email: {\r\n    color: '#666',\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  balanceSection: {\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: 'white',\r\n    padding: theme.spacing(3),\r\n    borderRadius: 12,\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  balanceIcon: {\r\n    fontSize: 32,\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  balanceAmount: {\r\n    fontSize: '2rem',\r\n    fontWeight: 600,\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  newItemButton: {\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: 'white',\r\n    padding: theme.spacing(1.5, 3),\r\n    borderRadius: 25,\r\n    fontSize: '0.9rem',\r\n    fontWeight: 600,\r\n    textTransform: 'none',\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.primary.dark,\r\n    },\r\n  },\r\n  contentSection: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: 16,\r\n    boxShadow: 'none',\r\n    borderBottom: '1px solid #f0f0f0',\r\n    overflow: 'hidden',\r\n  },\r\n  tabs: {\r\n    '& .MuiTab-root': {\r\n      color: '#666',\r\n      margin: theme.spacing(0, 2),\r\n      fontWeight: 500,\r\n      fontSize: '0.95rem',\r\n      textTransform: 'none',\r\n      '&:hover': {\r\n        color: theme.palette.primary.main,\r\n        backgroundColor: 'transparent',\r\n      },\r\n    },\r\n  },\r\n  itemCard: {\r\n    height: '100%',\r\n    borderRadius: 12,\r\n    overflow: 'hidden',\r\n    backgroundColor: '#ffffff',\r\n    boxShadow: 'none',\r\n    borderBottom: '1px solid #f0f0f0',\r\n    transition: 'transform 0.2s ease-in-out',\r\n    '&:hover': {\r\n      transform: 'translateY(-4px)',\r\n    },\r\n  },\r\n  itemImage: {\r\n    height: 200,\r\n    backgroundSize: 'cover',\r\n    backgroundPosition: 'center',\r\n  },\r\n  itemContent: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  itemTitle: {\r\n    fontSize: '1.1rem',\r\n    fontWeight: 600,\r\n    marginBottom: theme.spacing(1),\r\n    color: '#1a1a1a',\r\n  },\r\n  itemDescription: {\r\n    color: '#666',\r\n    fontSize: '0.9rem',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  price: {\r\n    color: theme.palette.primary.main,\r\n    fontSize: '1.25rem',\r\n    fontWeight: 600,\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  dateText: {\r\n    color: '#666',\r\n    fontSize: '0.85rem',\r\n  },\r\n  itemActions: {\r\n    padding: theme.spacing(1),\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n    gap: theme.spacing(1),\r\n    borderTop: '1px solid #f0f0f0',\r\n  },\r\n  actionButton: {\r\n    padding: 8,\r\n    color: '#666',\r\n    '&:hover': {\r\n      backgroundColor: 'rgba(0,0,0,0.03)',\r\n    },\r\n  },\r\n  deleteButton: {\r\n    padding: 8,\r\n    color: theme.palette.error.main,\r\n    '&:hover': {\r\n      backgroundColor: 'rgba(0,0,0,0.03)',\r\n    },\r\n  },\r\n  dialog: {\r\n    '& .MuiDialog-paper': {\r\n      borderRadius: 12,\r\n    },\r\n  },\r\n  dialogTitle: {\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: 'white',\r\n  },\r\n  dialogContent: {\r\n    padding: theme.spacing(3),\r\n  },\r\n  dialogActions: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  loadingContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    minHeight: 300,\r\n  },\r\n  noItems: {\r\n    textAlign: 'center',\r\n    padding: theme.spacing(6),\r\n    color: '#666',\r\n  },\r\n  favoriteCard: {\r\n    height: '100%',\r\n    borderRadius: 12,\r\n    overflow: 'hidden',\r\n    backgroundColor: '#ffffff',\r\n    boxShadow: 'none',\r\n    borderBottom: '1px solid #f0f0f0',\r\n    transition: 'transform 0.2s ease-in-out',\r\n    '&:hover': {\r\n      transform: 'translateY(-4px)',\r\n    },\r\n  },\r\n  favoriteButton: {\r\n    color: theme.palette.error.main,\r\n    '&:hover': {\r\n      backgroundColor: 'rgba(0,0,0,0.03)',\r\n    },\r\n  },\r\n  balanceCard: {\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: 'white',\r\n    padding: theme.spacing(2),\r\n    borderRadius: theme.shape.borderRadius,\r\n    marginTop: theme.spacing(2),\r\n    textAlign: 'center',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.primary.dark,\r\n    },\r\n  },\r\n  container: {\r\n    marginTop: theme.spacing(4),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  email: {\r\n    marginTop: theme.spacing(1),\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\n// ... (前面的 imports 和 useStyles 保持不变) ...\r\n\r\nfunction Profile() {\r\n  const classes = useStyles();\r\n  const { user } = useAuth();\r\n  const history = useHistory();\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [tabValue, setTabValue] = useState(0);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [loadingFavorites, setLoadingFavorites] = useState(true);\r\n  const [balance, setBalance] = useState(0);\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchUserItems();\r\n    }\r\n  }, [user]);\r\n  useEffect(() => {\r\n    fetchUserBalance();\r\n  }, []);\r\n  const fetchUserItems = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/items/user/${user.id}`);\r\n      const data = await response.json();\r\n      setUserItems(data);\r\n    } catch (error) {\r\n      console.error('Error fetching user items:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTabChange = (event, newValue) => {\r\n    setTabValue(newValue);\r\n  };\r\n\r\n  const handleNewItem = () => {\r\n    history.push('/items/new');\r\n  };\r\n\r\n  const displayBalance = () => {\r\n    const balance = Number(user?.balance || 0);\r\n    return balance.toLocaleString('zh-CN', {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2\r\n    });\r\n  };\r\n\r\n  const handleDeleteClick = (item) => {\r\n    setItemToDelete(item);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:5000/api/items/${itemToDelete._id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setUserItems(userItems.filter(item => item._id !== itemToDelete._id));\r\n        fetchUserItems();\r\n      }\r\n    } catch (error) {\r\n      console.error('Delete error:', error);\r\n    } finally {\r\n      setDeleteDialogOpen(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n // 获取收藏列表\r\n const fetchFavorites = async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await fetch(`http://localhost:5000/api/favorites`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    const data = await response.json();\r\n    setFavorites(data);\r\n  } catch (error) {\r\n    console.error('Error fetching favorites:', error);\r\n  } finally {\r\n    setLoadingFavorites(false);\r\n  }\r\n};\r\n\r\n// 在组件加载时获取收藏列表\r\nuseEffect(() => {\r\n  if (user) {\r\n    fetchFavorites();\r\n  }\r\n}, [user]);\r\n\r\n// 取消收藏\r\nconst handleRemoveFavorite = async (itemId) => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await fetch(`http://localhost:5000/api/favorites/${itemId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n\r\n    if (response.ok) {\r\n      setFavorites(favorites.filter(item => item._id !== itemId));\r\n    }\r\n  } catch (error) {\r\n    console.error('Error removing favorite:', error);\r\n  }\r\n};\r\n\r\n  if (!user) {\r\n    return (\r\n      <Container className={classes.root}>\r\n        <Typography variant=\"h5\" align=\"center\">\r\n          请先登录以查看个人资料\r\n        </Typography>\r\n      </Container>\r\n    );\r\n  }\r\n  const fetchUserBalance = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/users/balance', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setBalance(data.balance);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching balance:', error);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Container className={classes.container}>\r\n        <Grid container spacing={4}>\r\n          <Grid item xs={12} md={4}>\r\n            <Fade in timeout={800}>\r\n              <Paper className={classes.profileSection} elevation={0}>\r\n                <Box textAlign=\"center\">\r\n                  <Avatar className={classes.avatar}>\r\n                    {user.username.charAt(0).toUpperCase()}\r\n                  </Avatar>\r\n                  <Typography className={classes.username}>\r\n                    {user.username}\r\n                  </Typography>\r\n                  <Typography className={classes.email}>\r\n                    {user.email}\r\n                  </Typography>\r\n\r\n                  <Box className={classes.balanceSection}>\r\n  <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\">\r\n    <AccountBalanceWalletIcon className={classes.balanceIcon} />\r\n    <Typography variant=\"h6\">\r\n      我的余额\r\n    </Typography>\r\n  </Box>\r\n  <Typography className={classes.balanceAmount}>\r\n    ¥ {balance?.toFixed(2)}\r\n  </Typography>\r\n</Box>\r\n\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    className={classes.newItemButton}\r\n                    onClick={handleNewItem}\r\n                    startIcon={<AddIcon />}\r\n                  >\r\n                    发布新商品\r\n                  </Button>\r\n                </Box>\r\n              </Paper>\r\n            </Fade>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} md={8}>\r\n            <Fade in timeout={1000}>\r\n              <Paper className={classes.contentSection} elevation={0}>\r\n                <Tabs\r\n                  value={tabValue}\r\n                  onChange={handleTabChange}\r\n                  indicatorColor=\"primary\"\r\n                  textColor=\"primary\"\r\n                  centered\r\n                  className={classes.tabs}\r\n                >\r\n                  <Tab label=\"我发布的商品\" />\r\n                  <Tab label=\"我的收藏\" />\r\n                </Tabs>\r\n                <Divider />\r\n\r\n                {tabValue === 0 && (\r\n                  <Box p={3}>\r\n                    {loading ? (\r\n                      <Box className={classes.loadingContainer}>\r\n                        <CircularProgress style={{ color: '#8E37D7' }} />\r\n                      </Box>\r\n                    ) : userItems.length === 0 ? (\r\n                      <Typography className={classes.noItems}>\r\n                        还没有发布任何商品\r\n                      </Typography>\r\n                    ) : (\r\n                      <Grid container spacing={3}>\r\n                        {userItems.map((item) => (\r\n                          <Grid item xs={12} sm={6} key={item._id}>\r\n                            <Paper className={classes.itemCard} elevation={0}>\r\n                              <div\r\n                                className={classes.itemImage}\r\n                                style={{\r\n                                  backgroundImage: `url(http://localhost:5000${item.image})`,\r\n                                }}\r\n                              />\r\n                              <div className={classes.itemContent}>\r\n                                <Typography className={classes.itemTitle}>\r\n                                  {item.title}\r\n                                </Typography>\r\n                                <Typography className={classes.itemDescription}>\r\n                                  {item.description}\r\n                                </Typography>\r\n                                <Typography className={classes.price}>\r\n                                  ¥ {item.price}\r\n                                </Typography>\r\n                                <Typography className={classes.dateText}>\r\n                                  发布于 {new Date(item.createdAt).toLocaleDateString()}\r\n                                </Typography>\r\n                              </div>\r\n                              <div className={classes.itemActions}>\r\n                                <IconButton\r\n                                  className={classes.actionButton}\r\n                                  onClick={() => history.push(`/items/${item._id}/edit`)}\r\n                                  size=\"small\"\r\n                                >\r\n                                  <EditIcon />\r\n                                </IconButton>\r\n                                <IconButton\r\n                                  className={classes.deleteButton}\r\n                                  onClick={() => handleDeleteClick(item)}\r\n                                  size=\"small\"\r\n                                >\r\n                                  <DeleteIcon />\r\n                                </IconButton>\r\n                              </div>\r\n                            </Paper>\r\n                          </Grid>\r\n                        ))}\r\n                      </Grid>\r\n                    )}\r\n                  </Box>\r\n                )}\r\n\r\n{tabValue === 1 && (\r\n      <Box p={3}>\r\n        {loadingFavorites ? (\r\n          <Box className={classes.loadingContainer}>\r\n            <CircularProgress style={{ color: '#1976d2' }} />\r\n          </Box>\r\n        ) : favorites.length === 0 ? (\r\n          <Typography className={classes.noItems}>\r\n            还没有收藏任何商品\r\n          </Typography>\r\n        ) : (\r\n          <Grid container spacing={3}>\r\n            {favorites.map((item) => (\r\n              <Grid item xs={12} sm={6} key={item._id}>\r\n                <Paper className={classes.favoriteCard} elevation={0}>\r\n                  <div\r\n                    className={classes.itemImage}\r\n                    style={{\r\n                      backgroundImage: `url(http://localhost:5000${item.image})`,\r\n                    }}\r\n                  />\r\n                  <div className={classes.itemContent}>\r\n                    <Typography className={classes.itemTitle}>\r\n                      {item.title}\r\n                    </Typography>\r\n                    <Typography className={classes.itemDescription}>\r\n                      {item.description}\r\n                    </Typography>\r\n                    <Typography className={classes.price}>\r\n                      ¥ {item.price}\r\n                    </Typography>\r\n                    <Typography className={classes.dateText}>\r\n                      收藏于 {new Date(item.createdAt).toLocaleDateString()}\r\n                    </Typography>\r\n                  </div>\r\n                  <div className={classes.itemActions}>\r\n                    <IconButton\r\n                      className={classes.favoriteButton}\r\n                      onClick={() => handleRemoveFavorite(item._id)}\r\n                      size=\"small\"\r\n                    >\r\n                      <FavoriteIcon />\r\n                    </IconButton>\r\n                  </div>\r\n                </Paper>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        )}\r\n      </Box>\r\n    )}\r\n              </Paper>\r\n            </Fade>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Dialog\r\n          open={deleteDialogOpen}\r\n          onClose={() => setDeleteDialogOpen(false)}\r\n          className={classes.dialog}\r\n        >\r\n          <DialogTitle className={classes.dialogTitle}>\r\n            确认删除\r\n          </DialogTitle>\r\n          <DialogContent className={classes.dialogContent}>\r\n            <Typography>\r\n              确定要删除商品 \"{itemToDelete?.title}\" 吗？此操作不可撤销。\r\n            </Typography>\r\n          </DialogContent>\r\n          <DialogActions className={classes.dialogActions}>\r\n            <Button\r\n              onClick={() => setDeleteDialogOpen(false)}\r\n              variant=\"outlined\"\r\n              style={{ borderRadius: 20 }}\r\n            >\r\n              取消\r\n            </Button>\r\n            <Button\r\n              onClick={handleDeleteConfirm}\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              style={{ borderRadius: 20 }}\r\n            >\r\n              确认删除\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Container>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport { \r\n  AppBar, \r\n  Toolbar, \r\n  Typography, \r\n  Button, \r\n  makeStyles, \r\n  Container,\r\n  IconButton,\r\n  Badge,\r\n  Avatar,\r\n  Menu,\r\n  MenuItem,\r\n  Fade,\r\n  Box\r\n} from '@material-ui/core';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'; \r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  appBar: {\r\n    backgroundColor: '#ffffff',\r\n    boxShadow: 'none',\r\n    borderBottom: '1px solid #f0f0f0',\r\n  },\r\n  toolbar: {\r\n    minHeight: 70,\r\n    padding: theme.spacing(0, 3),\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  logo: {\r\n    flexGrow: 1,\r\n    textDecoration: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    '& img': {\r\n      height: 35,\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n  logoText: {\r\n    color: '#1a1a1a',\r\n    fontWeight: 700,\r\n    fontSize: '1.5rem',\r\n    letterSpacing: '-0.5px',\r\n    '&:hover': {\r\n      textDecoration: 'none',\r\n    },\r\n  },\r\n  navLinks: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginRight: theme.spacing(3),\r\n  },\r\n  navLink: {\r\n    color: '#666',\r\n    margin: theme.spacing(0, 2),\r\n    fontWeight: 500,\r\n    fontSize: '0.95rem',\r\n    '&:hover': {\r\n      color: theme.palette.primary.main,\r\n      backgroundColor: 'transparent',\r\n    },\r\n  },\r\n  publishButton: {\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: 'white',\r\n    padding: '8px 24px',\r\n    borderRadius: 25,\r\n    fontSize: '0.9rem',\r\n    fontWeight: 600,\r\n    textTransform: 'none',\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.primary.dark,\r\n    },\r\n  },\r\n  iconSection: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n  iconButton: {\r\n    color: '#666',\r\n    padding: 8,\r\n    marginLeft: theme.spacing(1),\r\n    '&:hover': {\r\n      backgroundColor: 'rgba(0,0,0,0.03)',\r\n    },\r\n  },\r\n  badge: {\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n  avatar: {\r\n    width: 35,\r\n    height: 35,\r\n    marginLeft: theme.spacing(2),\r\n    cursor: 'pointer',\r\n    border: '2px solid #fff',\r\n    boxShadow: '0 2px 4px rgba(0,0,0,0.05)',\r\n  },\r\n  menuItem: {\r\n    padding: '10px 24px',\r\n    fontSize: '0.95rem',\r\n    minWidth: 180,\r\n    '&:hover': {\r\n      backgroundColor: 'rgba(0,0,0,0.03)',\r\n    },\r\n  },\r\n  menuDivider: {\r\n    margin: '8px 0',\r\n    backgroundColor: '#f0f0f0',\r\n  },\r\n}));\r\n\r\nfunction Navbar() {\r\n  const classes = useStyles();\r\n  const { user, logout } = useAuth();\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const history = useHistory();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    handleMenuClose();\r\n    logout();\r\n    history.push('/login');\r\n  };\r\n // 获取未读消息数量\r\n const fetchUnreadCount = async () => {\r\n  if (!user) return;\r\n  \r\n  try {\r\n    const response = await fetch('http://localhost:5000/api/messages/unread/count', {\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n      }\r\n    });\r\n    const data = await response.json();\r\n    setUnreadCount(data.count);\r\n  } catch (error) {\r\n    console.error('Error fetching unread count:', error);\r\n  }\r\n};\r\n\r\n// 定期检查未读消息\r\nuseEffect(() => {\r\n  fetchUnreadCount();\r\n  const interval = setInterval(fetchUnreadCount, 500); // 每10秒检查一次\r\n  return () => clearInterval(interval);\r\n}, [user]);\r\n\r\n\r\n  console.log('Current user:', user);\r\n\r\n  return (\r\n    <AppBar position=\"sticky\" className={classes.appBar} elevation={0}>\r\n      <Container maxWidth=\"lg\">\r\n        <Toolbar className={classes.toolbar}>\r\n          <Link to=\"/\" className={classes.logo}>\r\n          <img \r\n  src={`${process.env.PUBLIC_URL}/logo.png`} \r\n  alt=\"Logo\" \r\n/>\r\n            <Typography className={classes.logoText}>\r\n              二手集市\r\n            </Typography>\r\n          </Link>\r\n\r\n          {user ? (\r\n            <>\r\n       \r\n              <Box className={classes.navLinks}>\r\n                <Button \r\n                  className={classes.navLink} \r\n                  component={Link} \r\n                  to=\"/discover\"\r\n                >\r\n                  发现\r\n                </Button>\r\n                \r\n               \r\n              </Box>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.publishButton}\r\n                startIcon={<AddIcon />}\r\n                component={Link}\r\n                to=\"/items/new\"\r\n              >\r\n                发布商品\r\n              </Button>\r\n\r\n              <Box className={classes.iconSection}>\r\n              <IconButton\r\n  color=\"inherit\"\r\n  component={Link}\r\n  to=\"/favorites\"\r\n>\r\n  <FavoriteIcon style={{ color: '#f44336' }}/>\r\n</IconButton>\r\n\r\n<IconButton\r\n          color=\"inherit\"\r\n          component={Link}\r\n          to=\"/cart\"\r\n        >\r\n          <ShoppingCartIcon />  {/* 使用新的图标 */}\r\n        </IconButton>\r\n\r\n        <IconButton \r\n  color=\"inherit\" \r\n  component={Link} \r\n  to=\"/messages\"\r\n>\r\n<Badge badgeContent={unreadCount > 0 ? unreadCount : null} color=\"secondary\">\r\n    <MailIcon />\r\n  </Badge>\r\n</IconButton>\r\n\r\n                <Avatar\r\n                  className={classes.avatar}\r\n                  onClick={handleMenuOpen}\r\n                  src={user.avatar}\r\n                >\r\n                  {user.username?.charAt(0)}\r\n                </Avatar>\r\n\r\n                <Menu\r\n                  anchorEl={anchorEl}\r\n                  open={Boolean(anchorEl)}\r\n                  onClose={handleMenuClose}\r\n                  TransitionComponent={Fade}\r\n                  getContentAnchorEl={null}\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                  }}\r\n                  PaperProps={{\r\n                    elevation: 2,\r\n                    style: {\r\n                      borderRadius: 12,\r\n                      marginTop: 8,\r\n                    },\r\n                  }}\r\n                >\r\n                  <MenuItem className={classes.menuItem}>\r\n                    <Box display=\"flex\" flexDirection=\"column\">\r\n                      <Typography variant=\"subtitle2\">\r\n                        {user.username}\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" color=\"textSecondary\">\r\n                        {user.email}\r\n                      </Typography>\r\n                    </Box>\r\n                  </MenuItem>\r\n                  <div className={classes.menuDivider} />\r\n                  <MenuItem \r\n                    className={classes.menuItem}\r\n                    onClick={() => {\r\n                      handleMenuClose();\r\n                      history.push('/profile');\r\n                    }}\r\n                  >\r\n                    个人主页\r\n                  </MenuItem>\r\n                  <MenuItem \r\n                    className={classes.menuItem}\r\n                    onClick={() => {\r\n                      handleMenuClose();\r\n                      history.push('/my-items');\r\n                    }}\r\n                  >\r\n                    我的订单\r\n                  </MenuItem>\r\n                  <MenuItem \r\n                    className={classes.menuItem}\r\n                    onClick={() => {\r\n                      handleMenuClose();\r\n                      history.push('/account/settings');\r\n                    }}\r\n                  >\r\n                    账号设置\r\n                  </MenuItem>\r\n                  <div className={classes.menuDivider} />\r\n                  <MenuItem \r\n                    className={classes.menuItem}\r\n                    onClick={handleLogout}\r\n                  >\r\n                    退出登录\r\n                  </MenuItem>\r\n                </Menu>\r\n              </Box>\r\n            </>\r\n          ) : (\r\n            <Box>\r\n              <Button\r\n                color=\"primary\"\r\n                className={classes.navLink}\r\n                component={Link}\r\n                to=\"/login\"\r\n              >\r\n                登录\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.publishButton}\r\n                component={Link}\r\n                to=\"/register\"\r\n              >\r\n                注册\r\n              </Button>\r\n            </Box>\r\n          )}\r\n        </Toolbar>\r\n      </Container>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default Navbar;","export default __webpack_public_path__ + \"static/media/banner-image.e756264b.png\";","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Container, \r\n  Grid, \r\n  Typography, \r\n  makeStyles, \r\n  Paper,\r\n  InputBase,\r\n  Button,\r\n  Chip,\r\n  Card,\r\n  CardMedia,\r\n  CardContent,\r\n  CardActions,\r\n  IconButton,\r\n  Box,\r\n  Slider,\r\n  FormControl,\r\n  Select,\r\n  MenuItem,\r\n  Divider,\r\n  CircularProgress,\r\n  TextField,\r\n} from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport SortIcon from '@material-ui/icons/Sort';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport bannerImage from '../../images/banner-image.png'; \r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: '#f5f7fa',\r\n    minHeight: '100vh',\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  banner: {\r\n    width: '100%',\r\n    height: 400,\r\n    position: 'relative',\r\n    backgroundColor: '#ffffff',\r\n    overflow: 'hidden',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundImage: `url(${bannerImage})`, \r\n    marginBottom: theme.spacing(4),\r\n  },\r\n  bannerContent: {\r\n    textAlign: 'center',\r\n    zIndex: 1,\r\n    marginTop: -120,\r\n  },\r\n  searchContainer: {\r\n    padding: theme.spacing(2),\r\n    marginBottom: theme.spacing(3),\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: theme.shape.borderRadius,\r\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n  },\r\n  search: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f5f5f5',\r\n    borderRadius: theme.shape.borderRadius,\r\n    padding: theme.spacing(1, 2),\r\n  },\r\n  searchInput: {\r\n    flex: 1,\r\n    marginLeft: theme.spacing(1),\r\n    fontSize: '1rem',\r\n  },\r\n  filterSection: {\r\n    padding: theme.spacing(2, 0),\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    flexWrap: 'wrap',\r\n    gap: theme.spacing(1),\r\n  },\r\n  filterChip: {\r\n    margin: theme.spacing(0.5),\r\n  },\r\n  itemCard: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    transition: 'all 0.3s ease',\r\n    '&:hover': {\r\n      transform: 'translateY(-4px)',\r\n      boxShadow: '0 4px 20px rgba(0,0,0,0.1)',\r\n    },\r\n  },\r\n  itemMedia: {\r\n    height: 200,\r\n    position: 'relative',\r\n  },\r\n  itemContent: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2),\r\n  },\r\n  cardActions: {\r\n    padding: theme.spacing(2),\r\n    borderTop: '1px solid #f0f0f0',\r\n    justifyContent: 'space-between',\r\n  },\r\n  price: {\r\n    color: theme.palette.primary.main,\r\n    fontWeight: 600,\r\n    fontSize: '1.25rem',\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  buyButton: {\r\n    borderRadius: 20,\r\n    textTransform: 'none',\r\n    fontWeight: 500,\r\n    padding: theme.spacing(1, 3),\r\n  },\r\n  loadingContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: 400,\r\n  },\r\n  sortSelect: {\r\n    marginLeft: 'auto',\r\n    minWidth: 150,\r\n  },\r\n  categoryTitle: {\r\n    marginBottom: theme.spacing(2),\r\n    fontWeight: 600,\r\n  },\r\n  noItems: {\r\n    textAlign: 'center',\r\n    padding: theme.spacing(4),\r\n  }\r\n}));\r\n\r\nconst categories = [\r\n  '全部',\r\n  '电子产品',\r\n  '服装',\r\n  '图书',\r\n  '家居',\r\n  '运动',\r\n  '其他'\r\n];\r\n\r\nfunction Home() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { user } = useAuth();\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('全部');\r\n  const [sortBy, setSortBy] = useState('newest');\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchItems();\r\n  }, [selectedCategory, sortBy]);\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch('http://localhost:5000/api/items');\r\n      if (!response.ok) {\r\n        throw new Error('获取商品列表失败');\r\n      }\r\n      const data = await response.json();\r\n      \r\n      // 根据分类筛选\r\n      let filteredItems = selectedCategory === '全部' \r\n        ? data \r\n        : data.filter(item => item.category === selectedCategory);\r\n\r\n      // 根据搜索词筛选\r\n      if (searchTerm) {\r\n        filteredItems = filteredItems.filter(item => \r\n          item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n          item.description.toLowerCase().includes(searchTerm.toLowerCase())\r\n        );\r\n      }\r\n\r\n      // 排序\r\n      filteredItems.sort((a, b) => {\r\n        switch (sortBy) {\r\n          case 'priceAsc':\r\n            return a.price - b.price;\r\n          case 'priceDesc':\r\n            return b.price - a.price;\r\n          case 'newest':\r\n          default:\r\n            return new Date(b.createdAt) - new Date(a.createdAt);\r\n        }\r\n      });\r\n\r\n      setItems(filteredItems);\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Error fetching items:', err);\r\n      setError('获取商品列表失败，请稍后重试');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    event.preventDefault();\r\n    fetchItems();\r\n  };\r\n\r\n  const handleViewItem = (itemId) => {\r\n    history.push(`/items/${itemId}`);\r\n  };\r\n\r\n  if (error) {\r\n    return (\r\n      <Container>\r\n        <Typography color=\"error\" align=\"center\">\r\n          {error}\r\n        </Typography>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.banner}>\r\n        <div className={classes.bannerContent}>\r\n          <Typography variant=\"h3\" gutterBottom>\r\n            发现好物\r\n          </Typography>\r\n          <Typography variant=\"h6\" color=\"textSecondary\">\r\n            二手交易，让闲置焕发新生\r\n          </Typography>\r\n        </div>\r\n      </div>\r\n\r\n      <Container>\r\n        <Paper className={classes.searchContainer}>\r\n          <form onSubmit={handleSearch}>\r\n            <div className={classes.search}>\r\n              <SearchIcon color=\"action\" />\r\n              <InputBase\r\n                className={classes.searchInput}\r\n                placeholder=\"搜索商品...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n              />\r\n              <Button \r\n                type=\"submit\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                className={classes.buyButton}\r\n              >\r\n                搜索\r\n              </Button>\r\n            </div>\r\n          </form>\r\n\r\n          <div className={classes.filterSection}>\r\n            <Box display=\"flex\" alignItems=\"center\" flexWrap=\"wrap\" flex={1}>\r\n              {categories.map((category) => (\r\n                <Chip\r\n                  key={category}\r\n                  label={category}\r\n                  onClick={() => setSelectedCategory(category)}\r\n                  className={classes.filterChip}\r\n                  color={selectedCategory === category ? \"primary\" : \"default\"}\r\n                  variant={selectedCategory === category ? \"default\" : \"outlined\"}\r\n                />\r\n              ))}\r\n            </Box>\r\n\r\n            <FormControl variant=\"outlined\" size=\"small\" className={classes.sortSelect}>\r\n              <Select\r\n                value={sortBy}\r\n                onChange={(e) => setSortBy(e.target.value)}\r\n                startAdornment={<SortIcon style={{ marginRight: 8 }} />}\r\n              >\r\n                <MenuItem value=\"newest\">最新发布</MenuItem>\r\n                <MenuItem value=\"priceAsc\">价格从低到高</MenuItem>\r\n                <MenuItem value=\"priceDesc\">价格从高到低</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </div>\r\n        </Paper>\r\n\r\n        {loading ? (\r\n          <div className={classes.loadingContainer}>\r\n            <CircularProgress />\r\n          </div>\r\n        ) : items.length === 0 ? (\r\n          <Paper className={classes.noItems}>\r\n            <Typography variant=\"h6\" color=\"textSecondary\">\r\n              暂无商品\r\n            </Typography>\r\n          </Paper>\r\n        ) : (\r\n          <Grid container spacing={3}>\r\n            {items.map((item) => (\r\n              <Grid item xs={12} sm={6} md={4} lg={3} key={item._id}>\r\n                <Card className={classes.itemCard}>\r\n                  <CardMedia\r\n                    className={classes.itemMedia}\r\n                    image={`http://localhost:5000${item.image}`}\r\n                    title={item.title}\r\n                  />\r\n                  <CardContent className={classes.itemContent}>\r\n                    <Typography variant=\"h6\" gutterBottom noWrap>\r\n                      {item.title}\r\n                    </Typography>\r\n                    <Typography \r\n                      variant=\"body2\" \r\n                      color=\"textSecondary\"\r\n                      style={{\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis',\r\n                        display: '-webkit-box',\r\n                        WebkitLineClamp: 2,\r\n                        WebkitBoxOrient: 'vertical',\r\n                      }}\r\n                    >\r\n                      {item.description}\r\n                    </Typography>\r\n                    <Typography className={classes.price}>\r\n                      ¥ {item.price.toLocaleString()}\r\n                    </Typography>\r\n                  </CardContent>\r\n                  <CardActions className={classes.cardActions}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      className={classes.buyButton}\r\n                      onClick={() => handleViewItem(item._id)}\r\n                      fullWidth\r\n                    >\r\n                      去购买\r\n                    </Button>\r\n                  </CardActions>\r\n                </Card>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        )}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Container, \r\n  Paper, \r\n  TextField, \r\n  Button, \r\n  Typography, \r\n  makeStyles \r\n} from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext'; // 确保已创建此context\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    padding: theme.spacing(4),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  form: {\r\n    width: '100%',\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  error: {\r\n    color: theme.palette.error.main,\r\n    marginTop: theme.spacing(2),\r\n  }\r\n}));\r\n\r\nfunction Login() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { login, message, setMessage } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n   // 清除消息\r\n  useEffect(() => {\r\n    if (message) {\r\n      const timer = setTimeout(() => {\r\n        setMessage('');\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [message, setMessage]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/users/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || '登录失败');\r\n      }\r\n\r\n      // 登录成功，保存用户信息和token\r\n      login(data.user, data.token);\r\n      history.push('/'); // 跳转到首页\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <Paper className={classes.paper}>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          登录\r\n        </Typography>\r\n        \r\n        {error && (\r\n          <Typography className={classes.error}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n\r\n        {message && (\r\n          <Typography className={classes.success}>\r\n            {message}\r\n          </Typography>\r\n        )}\r\n\r\n        <form className={classes.form} onSubmit={handleSubmit}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"邮箱\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"密码\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            登录\r\n          </Button>\r\n        </form>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport { \r\n  Container, \r\n  Paper, \r\n  TextField, \r\n  Button, \r\n  Typography, \r\n  makeStyles,\r\n  Snackbar \r\n} from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    padding: theme.spacing(4),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  form: {\r\n    width: '100%',\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  error: {\r\n    color: theme.palette.error.main,\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  success: {\r\n    color: theme.palette.success.main,\r\n    marginTop: theme.spacing(2),\r\n  }\r\n}));\r\n\r\nfunction Register() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // 验证密码\r\n    if (formData.password !== formData.confirmPassword) {\r\n      setError('两次输入的密码不匹配');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/users/register', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          username: formData.username,\r\n          email: formData.email,\r\n          password: formData.password\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || '注册失败');\r\n      }\r\n\r\n      setSuccess(true);\r\n      setError('');\r\n      setTimeout(() => {\r\n        history.push('/login');\r\n      }, 2000);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setSuccess(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <Paper className={classes.paper}>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          注册\r\n        </Typography>\r\n        \r\n        {error && (\r\n          <Typography className={classes.error}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n        \r\n        {success && (\r\n          <Typography className={classes.success}>\r\n            注册成功！正在跳转到登录页面...\r\n          </Typography>\r\n        )}\r\n\r\n        <form className={classes.form} onSubmit={handleSubmit}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"用户名\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"邮箱\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"密码\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"确认密码\"\r\n            name=\"confirmPassword\"\r\n            type=\"password\"\r\n            value={formData.confirmPassword}\r\n            onChange={handleChange}\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            注册\r\n          </Button>\r\n        </form>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Register;","import React, { useState } from 'react';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  makeStyles,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n} from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    padding: theme.spacing(4),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  form: {\r\n    width: '100%',\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  formControl: {\r\n    width: '100%',\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  imagePreview: {\r\n    width: '100%',\r\n    maxHeight: 300,\r\n    objectFit: 'contain',\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  \r\n}));\r\n\r\nconst categories = [\r\n  '电子产品',\r\n  '服装',\r\n  '图书',\r\n  '家居',\r\n  '运动',\r\n  '其他',\r\n];\r\n\r\nfunction ItemForm() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { user } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n    category: '',\r\n  });\r\n  const [image, setImage] = useState(null);\r\n  const [preview, setPreview] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImage(file);\r\n      setPreview(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!user) {\r\n      setError('请先登录');\r\n      return;\r\n    }\r\n\r\n    const formDataToSend = new FormData();\r\n    formDataToSend.append('title', formData.title);\r\n    formDataToSend.append('description', formData.description);\r\n    formDataToSend.append('price', formData.price);\r\n    formDataToSend.append('category', formData.category);\r\n    formDataToSend.append('userId', user.id);\r\n    formDataToSend.append('image', image);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/items', {\r\n        method: 'POST',\r\n        body: formDataToSend,\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || '发布失败');\r\n      }\r\n\r\n      history.push('/');\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"sm\">\r\n      <Paper className={classes.paper}>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          发布商品\r\n        </Typography>\r\n        \r\n        {error && (\r\n          <Typography color=\"error\" gutterBottom>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n\r\n        <form className={classes.form} onSubmit={handleSubmit}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"商品名称\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n          />\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            multiline\r\n            rows={4}\r\n            label=\"商品描述\"\r\n            name=\"description\"\r\n            value={formData.description}\r\n            onChange={handleChange}\r\n          />\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"价格\"\r\n            name=\"price\"\r\n            type=\"number\"\r\n            value={formData.price}\r\n            onChange={handleChange}\r\n          />\r\n\r\n          <FormControl variant=\"outlined\" className={classes.formControl}>\r\n            <InputLabel>商品分类</InputLabel>\r\n            <Select\r\n              value={formData.category}\r\n              onChange={handleChange}\r\n              label=\"商品分类\"\r\n              name=\"category\"\r\n              required\r\n            >\r\n              {categories.map((category) => (\r\n                <MenuItem key={category} value={category}>\r\n                  {category}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n\r\n          <input\r\n            accept=\"image/*\"\r\n            style={{ display: 'none' }}\r\n            id=\"image-upload\"\r\n            type=\"file\"\r\n            onChange={handleImageChange}\r\n          />\r\n          <label htmlFor=\"image-upload\">\r\n            <Button\r\n              variant=\"contained\"\r\n              component=\"span\"\r\n              fullWidth\r\n              className={classes.submit}\r\n            >\r\n              上传图片\r\n            </Button>\r\n          </label>\r\n\r\n          {preview && (\r\n            <img src={preview} alt=\"预览\" className={classes.imagePreview} />\r\n          )}\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            发布商品\r\n          </Button>\r\n        </form>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ItemForm;","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Button,\r\n  makeStyles,\r\n  Paper,\r\n  Grid,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n} from '@material-ui/core';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(3),\r\n  },\r\n  image: {\r\n    width: '100%',\r\n    height: 'auto',\r\n    maxHeight: '500px',\r\n    objectFit: 'contain',\r\n  },\r\n  price: {\r\n    color: theme.palette.primary.main,\r\n    fontWeight: 600,\r\n    fontSize: '2rem',\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  description: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n    whiteSpace: 'pre-wrap',\r\n  },\r\n  seller: {\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  buttonGroup: {\r\n    marginTop: theme.spacing(3),\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  loadingContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    minHeight: '60vh',\r\n  },\r\n}));\r\n\r\nfunction ItemDetail() {\r\n  const classes = useStyles();\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n  const { user } = useAuth();\r\n  const [item, setItem] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isFavorite, setIsFavorite] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editFormData, setEditFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchItem();\r\n    if (user) {\r\n      checkFavorite();\r\n    }\r\n  }, [id, user]);\r\n\r\n  useEffect(() => {\r\n    if (item) {\r\n      setEditFormData({\r\n        title: item.title,\r\n        description: item.description || '',\r\n        price: item.price,\r\n      });\r\n    }\r\n  }, [item]);\r\n// 添加联系卖家的函数\r\nconst handleContactSeller = () => {\r\n  if (!user) {\r\n    alert('请先登录');\r\n    return;\r\n  }\r\n  // 跳转到消息页面并传递卖家信息\r\n  history.push('/messages', { \r\n    selectedUser: item.seller \r\n  });\r\n};\r\n  const fetchItem = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/items/${id}`);\r\n      if (!response.ok) {\r\n        throw new Error('商品不存在');\r\n      }\r\n      const data = await response.json();\r\n      setItem(data);\r\n    } catch (error) {\r\n      console.error('Error fetching item:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkFavorite = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/favorites/check/${id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      const data = await response.json();\r\n      setIsFavorite(data.isFavorite);\r\n    } catch (error) {\r\n      console.error('Error checking favorite status:', error);\r\n    }\r\n  };\r\n\r\n  const handleFavorite = async () => {\r\n    if (!user) {\r\n      history.push('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const method = isFavorite ? 'DELETE' : 'POST';\r\n      const response = await fetch(`http://localhost:5000/api/favorites/${id}`, {\r\n        method,\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setIsFavorite(!isFavorite);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling favorite:', error);\r\n    }\r\n  };\r\n\r\n  const handleAddToCart = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/cart/add', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({ itemId: item._id })\r\n      });\r\n  \r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.message || '添加失败');\r\n      }\r\n  \r\n      alert('成功添加到购物车！');\r\n    } catch (error) {\r\n      console.error('Error adding to cart:', error);\r\n      alert(error.message || '添加失败，请重试');\r\n    }\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/items/${item._id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify(editFormData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('更新失败');\r\n      }\r\n\r\n      const updatedItem = await response.json();\r\n      setItem(updatedItem);\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error('Error updating item:', error);\r\n      alert('更新失败，请重试');\r\n    }\r\n  };\r\n// 添加购买处理函数\r\nconst handlePurchase = async () => {\r\n  try {\r\n    console.log('正在创建订单 - 商品ID:', item._id);\r\n    \r\n    const response = await fetch('http://localhost:5000/api/orders', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n      },\r\n      body: JSON.stringify({\r\n        itemId: item._id\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || '购买失败');\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('订单创建成功:', data);\r\n    alert('购买成功！');\r\n    history.push('/my-items');\r\n  } catch (error) {\r\n    console.error('购买失败:', error);\r\n    alert('购买失败，请重试');\r\n  }\r\n};\r\n\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className={classes.loadingContainer}>\r\n        <CircularProgress />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!item) {\r\n    return (\r\n      <Container>\r\n        <Typography variant=\"h5\">商品不存在</Typography>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      <Paper className={classes.paper}>\r\n        <Grid container spacing={4}>\r\n          <Grid item xs={12} md={6}>\r\n            <img src={`http://localhost:5000${item.image}`} alt={item.title} className={classes.image} />\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography variant=\"h4\" component=\"h1\">\r\n              {item.title}\r\n            </Typography>\r\n            <Typography className={classes.price}>\r\n              ¥ {item.price?.toLocaleString()}\r\n            </Typography>\r\n            <Typography className={classes.description} variant=\"body1\">\r\n              {item.description}\r\n            </Typography>\r\n            <Typography className={classes.seller}>\r\n              卖家：{item.seller.username}\r\n            </Typography>\r\n            <div className={classes.buttonGroup}>\r\n              {user && user.id === item.seller._id ? (\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<EditIcon />}\r\n                  onClick={() => setIsEditing(true)}\r\n                >\r\n                  编辑商品\r\n                </Button>\r\n              ) : (\r\n                <>\r\n                <Button\r\n  variant=\"contained\"\r\n  color=\"primary\"\r\n  onClick={handlePurchase}\r\n  disabled={!user || user.id === item.seller._id}\r\n  style={{ backgroundColor: '#ff4081' }}\r\n>\r\n  立即购买\r\n</Button>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<ShoppingCartIcon />}\r\n                    onClick={handleAddToCart}\r\n                  >\r\n                    加入购物车\r\n                  </Button>\r\n                  <Button\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          onClick={handleContactSeller}\r\n          disabled={!user || user.id === item.seller._id}\r\n        >\r\n          联系卖家\r\n        </Button>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    startIcon={isFavorite ? <FavoriteIcon /> : <FavoriteBorderIcon />}\r\n                    onClick={handleFavorite}\r\n                  >\r\n                    {isFavorite ? '取消收藏' : '收藏'}\r\n                  </Button>\r\n                 \r\n                </>\r\n              )}\r\n            </div>\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n\r\n      {/* 编辑对话框 */}\r\n      <Dialog \r\n        open={isEditing} \r\n        onClose={() => setIsEditing(false)}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>编辑商品信息</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            name=\"title\"\r\n            label=\"商品名称\"\r\n            value={editFormData.title}\r\n            onChange={(e) => setEditFormData({...editFormData, title: e.target.value})}\r\n            fullWidth\r\n            margin=\"normal\"\r\n          />\r\n          <TextField\r\n            name=\"description\"\r\n            label=\"商品描述\"\r\n            value={editFormData.description}\r\n            onChange={(e) => setEditFormData({...editFormData, description: e.target.value})}\r\n            fullWidth\r\n            multiline\r\n            rows={4}\r\n            margin=\"normal\"\r\n          />\r\n          <TextField\r\n            name=\"price\"\r\n            label=\"价格\"\r\n            value={editFormData.price}\r\n            onChange={(e) => setEditFormData({...editFormData, price: e.target.value})}\r\n            fullWidth\r\n            type=\"number\"\r\n            margin=\"normal\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setIsEditing(false)}>\r\n            取消\r\n          </Button>\r\n          <Button onClick={handleSaveEdit} color=\"primary\" variant=\"contained\">\r\n            保存\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ItemDetail;","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Grid,\r\n  Typography,\r\n  makeStyles,\r\n  Paper,\r\n  IconButton,\r\n  Card,\r\n  CardMedia,\r\n  CardContent,\r\n  CardActions,\r\n  Button,\r\n} from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  card: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  cardMedia: {\r\n    paddingTop: '56.25%', // 16:9\r\n    position: 'relative',\r\n  },\r\n  cardContent: {\r\n    flexGrow: 1,\r\n  },\r\n  price: {\r\n    color: theme.palette.primary.main,\r\n    fontWeight: 600,\r\n    fontSize: '1.25rem',\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  deleteButton: {\r\n    marginLeft: 'auto',\r\n  },\r\n  noFavorites: {\r\n    textAlign: 'center',\r\n    padding: theme.spacing(4),\r\n  },\r\n}));\r\n\r\nfunction FavoritesList() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { user } = useAuth();\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchFavorites();\r\n  }, []);\r\n\r\n  const fetchFavorites = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/favorites', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      const data = await response.json();\r\n      setFavorites(data);\r\n    } catch (error) {\r\n      console.error('Error fetching favorites:', error);\r\n      setMessage('获取收藏失败');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveFavorite = async (itemId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/favorites/${itemId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setFavorites(favorites.filter(item => item._id !== itemId));\r\n        setMessage('已取消收藏');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing favorite:', error);\r\n      setMessage('取消收藏失败');\r\n    }\r\n  };\r\n\r\n  const handleItemClick = (itemId) => {\r\n    history.push(`/items/${itemId}`);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className={classes.container}>\r\n        <Typography>加载中...</Typography>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <Container className={classes.container}>\r\n        <Paper className={classes.noFavorites}>\r\n          <Typography variant=\"h6\">请先登录</Typography>\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (favorites.length === 0) {\r\n    return (\r\n      <Container className={classes.container}>\r\n        <Paper className={classes.noFavorites}>\r\n          <Typography variant=\"h6\">暂无收藏商品</Typography>\r\n          <Button \r\n            color=\"primary\" \r\n            onClick={() => history.push('/')}\r\n            style={{ marginTop: 16 }}\r\n          >\r\n            去逛逛\r\n          </Button>\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        我的收藏\r\n      </Typography>\r\n      <Grid container spacing={4}>\r\n        {favorites.map((item) => (\r\n          <Grid item key={item._id} xs={12} sm={6} md={4}>\r\n            <Card className={classes.card}>\r\n              <CardMedia\r\n                className={classes.cardMedia}\r\n                image={`http://localhost:5000${item.image}`}\r\n                title={item.title}\r\n                onClick={() => handleItemClick(item._id)}\r\n                style={{ cursor: 'pointer' }}\r\n              />\r\n              <CardContent className={classes.cardContent}>\r\n                <Typography gutterBottom variant=\"h6\" component=\"h2\">\r\n                  {item.title}\r\n                </Typography>\r\n                <Typography className={classes.price}>\r\n                  ¥ {item.price?.toLocaleString()}\r\n                </Typography>\r\n              </CardContent>\r\n              <CardActions>\r\n                <IconButton\r\n                  className={classes.deleteButton}\r\n                  onClick={() => handleRemoveFavorite(item._id)}\r\n                >\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </CardActions>\r\n            </Card>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default FavoritesList;","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Grid,\r\n  Card,\r\n  CardMedia,\r\n  CardContent,\r\n  IconButton,\r\n  Button,\r\n  makeStyles,\r\n  Box,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Snackbar,\r\n} from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  card: {\r\n    display: 'flex',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  cardMedia: {\r\n    width: 150,\r\n  },\r\n  cardContent: {\r\n    flex: 1,\r\n  },\r\n  totalSection: {\r\n    marginTop: theme.spacing(3),\r\n    padding: theme.spacing(2),\r\n  },\r\n  deleteButton: {\r\n    marginLeft: 'auto',\r\n  },\r\n  checkoutButton: {\r\n    marginTop: theme.spacing(2),\r\n    padding: theme.spacing(1.5),\r\n    borderRadius: 25,\r\n  },\r\n  dialogContent: {\r\n    padding: theme.spacing(3),\r\n  },\r\n  dialogPrice: {\r\n    color: theme.palette.primary.main,\r\n    fontWeight: 600,\r\n    fontSize: '1.5rem',\r\n    marginTop: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction Cart() {\r\n  const classes = useStyles();\r\n  const { user } = useAuth();\r\n  const history = useHistory();\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n  const [openCheckoutDialog, setOpenCheckoutDialog] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCartItems();\r\n  }, []);\r\n\r\n  const fetchCartItems = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/cart', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      const data = await response.json();\r\n      setCartItems(data);\r\n    } catch (error) {\r\n      console.error('Error fetching cart items:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveFromCart = async (itemId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/cart/${itemId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setCartItems(cartItems.filter(item => item._id !== itemId));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing item from cart:', error);\r\n    }\r\n  };\r\n\r\n  const handleCheckout = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/transactions/purchase-cart', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setMessage('购买成功！感谢您的购买，祝您购物愉快！');\r\n        setOpenCheckoutDialog(false);\r\n        setTimeout(() => {\r\n          history.push('/profile');\r\n        }, 2000);\r\n      } else {\r\n        setMessage(data.message || '购买失败');\r\n      }\r\n    } catch (error) {\r\n      console.error('Checkout error:', error);\r\n      setMessage('购买失败，请稍后重试');\r\n    }\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return cartItems.reduce((total, item) => total + item.price, 0);\r\n  };\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        购物车\r\n      </Typography>\r\n\r\n      {loading ? (\r\n        <Typography>加载中...</Typography>\r\n      ) : cartItems.length === 0 ? (\r\n        <Typography>购物车是空的</Typography>\r\n      ) : (\r\n        <>\r\n          {cartItems.map((item) => (\r\n            <Card key={item._id} className={classes.card}>\r\n              <CardMedia\r\n                className={classes.cardMedia}\r\n                image={`http://localhost:5000${item.image}`}\r\n                title={item.title}\r\n              />\r\n              <CardContent className={classes.cardContent}>\r\n                <Typography variant=\"h6\">{item.title}</Typography>\r\n                <Typography variant=\"h6\" color=\"primary\">\r\n                  ¥{item.price}\r\n                </Typography>\r\n              </CardContent>\r\n              <IconButton\r\n                className={classes.deleteButton}\r\n                onClick={() => handleRemoveFromCart(item._id)}\r\n              >\r\n                <DeleteIcon />\r\n              </IconButton>\r\n            </Card>\r\n          ))}\r\n\r\n          <Paper className={classes.totalSection}>\r\n            <Typography variant=\"h6\">\r\n              总计: ¥{calculateTotal()}\r\n            </Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              fullWidth\r\n              className={classes.checkoutButton}\r\n              onClick={() => setOpenCheckoutDialog(true)}\r\n              disabled={user?.balance < calculateTotal()}\r\n            >\r\n              {user?.balance < calculateTotal() ? '余额不足' : '结算'}\r\n            </Button>\r\n          </Paper>\r\n\r\n          <Dialog \r\n            open={openCheckoutDialog} \r\n            onClose={() => setOpenCheckoutDialog(false)}\r\n            maxWidth=\"sm\"\r\n            fullWidth\r\n          >\r\n            <DialogTitle>确认购买</DialogTitle>\r\n            <DialogContent className={classes.dialogContent}>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                购物车商品 ({cartItems.length})\r\n              </Typography>\r\n              <Typography className={classes.dialogPrice}>\r\n                总计: ¥{calculateTotal()}\r\n              </Typography>\r\n              <Typography color=\"textSecondary\">\r\n                购买后余额: ¥{(user?.balance - calculateTotal())?.toLocaleString()}\r\n              </Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button \r\n                onClick={() => setOpenCheckoutDialog(false)} \r\n                color=\"primary\"\r\n              >\r\n                取消\r\n              </Button>\r\n              <Button\r\n                onClick={handleCheckout}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                确认购买\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n          <Snackbar\r\n            open={!!message}\r\n            autoHideDuration={2000}\r\n            onClose={() => setMessage('')}\r\n            message={message}\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          />\r\n        </>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Cart;","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Grid,\r\n  Typography,\r\n  Card,\r\n  CardMedia,\r\n  CardContent,\r\n  makeStyles,\r\n  Box,\r\n  CircularProgress,\r\n  Chip,\r\n  Avatar,\r\n  Divider,\r\n} from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\r\nimport TimelapseIcon from '@material-ui/icons/Timelapse';\r\nimport WhatshotIcon from '@material-ui/icons/Whatshot';\r\n\r\nconst formatTimeAgo = (date) => {\r\n  const seconds = Math.floor((new Date() - new Date(date)) / 1000);\r\n\r\n  let interval = seconds / 31536000;\r\n  if (interval > 1) return Math.floor(interval) + ' 年前';\r\n\r\n  interval = seconds / 2592000;\r\n  if (interval > 1) return Math.floor(interval) + ' 个月前';\r\n\r\n  interval = seconds / 86400;\r\n  if (interval > 1) return Math.floor(interval) + ' 天前';\r\n\r\n  interval = seconds / 3600;\r\n  if (interval > 1) return Math.floor(interval) + ' 小时前';\r\n\r\n  interval = seconds / 60;\r\n  if (interval > 1) return Math.floor(interval) + ' 分钟前';\r\n\r\n  return '刚刚';\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n      paddingTop: theme.spacing(4),\r\n      paddingBottom: theme.spacing(4),\r\n    },\r\n    sectionTitle: {\r\n      fontWeight: 600,\r\n      marginBottom: theme.spacing(3),\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: theme.spacing(1),\r\n      '& svg': {\r\n        color: theme.palette.primary.main,\r\n      },\r\n    },\r\n    card: {\r\n      height: '100%',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      cursor: 'pointer',\r\n      transition: 'all 0.3s ease',\r\n      borderRadius: theme.spacing(1.5),\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\r\n      '&:hover': {\r\n        transform: 'translateY(-8px)',\r\n        boxShadow: '0 12px 20px rgba(0,0,0,0.12)',\r\n      },\r\n    },\r\n    cardMedia: {\r\n      height: 220,\r\n      backgroundSize: 'cover',\r\n      borderRadius: `${theme.spacing(1.5)}px ${theme.spacing(1.5)}px 0 0`,\r\n    },\r\n    cardContent: {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(2),\r\n    },\r\n    price: {\r\n      color: theme.palette.error.main,\r\n      fontWeight: 700,\r\n      fontSize: '1.25rem',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: theme.spacing(0.5),\r\n      marginTop: theme.spacing(1),\r\n    },\r\n    priceIcon: {\r\n      fontSize: '1rem',\r\n      color: theme.palette.error.light,\r\n    },\r\n    sellerInfo: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      padding: theme.spacing(2),\r\n      backgroundColor: theme.palette.background.default,\r\n      borderRadius: `${theme.spacing(1.5)}px ${theme.spacing(1.5)}px 0 0`,\r\n    },\r\n    avatar: {\r\n      width: 32,\r\n      height: 32,\r\n      marginRight: theme.spacing(1),\r\n      border: `2px solid ${theme.palette.background.paper}`,\r\n    },\r\n    username: {\r\n      fontSize: '0.9rem',\r\n      fontWeight: 500,\r\n      color: theme.palette.text.primary,\r\n    },\r\n    timeChip: {\r\n      marginLeft: 'auto',\r\n      backgroundColor: theme.palette.background.paper,\r\n      fontSize: '0.75rem',\r\n    },\r\n    title: {\r\n      fontSize: '1rem',\r\n      fontWeight: 500,\r\n      marginBottom: theme.spacing(1),\r\n      display: '-webkit-box',\r\n      '-webkit-line-clamp': 2,\r\n      '-webkit-box-orient': 'vertical',\r\n      overflow: 'hidden',\r\n      textOverflow: 'ellipsis',\r\n    },\r\n    description: {\r\n      color: theme.palette.text.secondary,\r\n      fontSize: '0.875rem',\r\n      marginBottom: theme.spacing(1),\r\n      display: '-webkit-box',\r\n      '-webkit-line-clamp': 2,\r\n      '-webkit-box-orient': 'vertical',\r\n      overflow: 'hidden',\r\n    },\r\n    loadingContainer: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      minHeight: 400,\r\n    },\r\n    divider: {\r\n      margin: theme.spacing(6, 0),\r\n    },\r\n    emptyMessage: {\r\n      textAlign: 'center',\r\n      padding: theme.spacing(4),\r\n      backgroundColor: theme.palette.background.paper,\r\n      borderRadius: theme.spacing(2),\r\n    },\r\n  }));\r\n\r\n  function DiscoverPage() {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const [newItems, setNewItems] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n  \r\n    useEffect(() => {\r\n      fetchItems();\r\n      const interval = setInterval(fetchItems, 60000);\r\n      return () => clearInterval(interval);\r\n    }, []);\r\n  \r\n    const fetchItems = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await fetch('http://localhost:5000/api/items', {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        \r\n        const data = await response.json();\r\n        \r\n        // 过滤出一小时内发布的商品\r\n        const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000);\r\n        const recentItems = data\r\n          .filter(item => new Date(item.createdAt) > oneHourAgo)\r\n          .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n        \r\n        setNewItems(recentItems);\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n        setNewItems([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n  \r\n    const handleItemClick = (itemId) => {\r\n      history.push(`/items/${itemId}`);\r\n    };\r\n  \r\n    if (loading) {\r\n      return (\r\n        <Container className={classes.loadingContainer}>\r\n          <CircularProgress />\r\n        </Container>\r\n      );\r\n    }\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      <Box mb={4}>\r\n        <Typography variant=\"h5\" className={classes.sectionTitle}>\r\n          <TimelapseIcon />\r\n          最新上架\r\n          <Chip \r\n            size=\"small\" \r\n            label=\"1小时内\" \r\n            color=\"primary\" \r\n            style={{ marginLeft: 8 }}\r\n          />\r\n        </Typography>\r\n        \r\n        {newItems.length > 0 ? (\r\n          <Grid container spacing={3}>\r\n            {newItems.map((item) => (\r\n              <Grid item key={item._id} xs={12} sm={6} md={4} lg={3}>\r\n                <Card \r\n                  className={classes.card}\r\n                  onClick={() => handleItemClick(item._id)}\r\n                >\r\n                  <Box className={classes.sellerInfo}>\r\n                    <Avatar \r\n                      src={item.seller && item.seller.avatar} \r\n                      className={classes.avatar}\r\n                    >\r\n                      {item.seller && item.seller.username && item.seller.username[0]}\r\n                    </Avatar>\r\n                    <Typography className={classes.username}>\r\n                      {item.seller && item.seller.username}\r\n                    </Typography>\r\n                    <Chip\r\n                      size=\"small\"\r\n                      className={classes.timeChip}\r\n                      label={formatTimeAgo(item.createdAt)}\r\n                    />\r\n                  </Box>\r\n                  <CardMedia\r\n                    className={classes.cardMedia}\r\n                    image={item.image ? `http://localhost:5000${item.image}` : '/default-item-image.jpg'}\r\n                    title={item.title}\r\n                  />\r\n                  <CardContent className={classes.cardContent}>\r\n                    <Typography className={classes.title}>\r\n                      {item.title}\r\n                    </Typography>\r\n                    {item.description && (\r\n                      <Typography className={classes.description}>\r\n                        {item.description}\r\n                      </Typography>\r\n                    )}\r\n                    <Typography className={classes.price}>\r\n                      <LocalOfferIcon className={classes.priceIcon} />\r\n                      ¥ {item.price && item.price.toLocaleString()}\r\n                    </Typography>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        ) : (\r\n          <Box className={classes.emptyMessage}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              暂无最新商品\r\n            </Typography>\r\n            <Typography color=\"textSecondary\">\r\n              稍后再来看看吧！\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </Box>\r\n\r\n      <Divider className={classes.divider} />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default DiscoverPage;","import React, { useState } from 'react';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  makeStyles,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Box,\r\n} from '@material-ui/core';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(3),\r\n  },\r\n  title: {\r\n    marginBottom: theme.spacing(3),\r\n    fontWeight: 500,\r\n  },\r\n  form: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  submitButton: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  message: {\r\n    marginTop: theme.spacing(2),\r\n  }\r\n}));\r\n\r\nfunction AccountSettings() {\r\n  const classes = useStyles();\r\n  const { user, updateUser } = useAuth();\r\n  const history = useHistory();\r\n  const [formData, setFormData] = useState({\r\n    username: user?.username || '',\r\n    email: user?.email || '',\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: '',\r\n  });\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n  \r\n    // 验证新密码\r\n    if (formData.newPassword && formData.newPassword !== formData.confirmPassword) {\r\n      setMessage('新密码与确认密码不匹配');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      // 更新用户信息\r\n      const response = await fetch('http://localhost:5000/api/users/profile', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({\r\n          username: formData.username,\r\n          email: formData.email,\r\n          currentPassword: formData.currentPassword || undefined,\r\n          newPassword: formData.newPassword || undefined\r\n        })\r\n      });\r\n  \r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.message || '更新失败');\r\n      }\r\n  \r\n      // 更新本地用户信息\r\n      updateUser(data);\r\n      setMessage('账户信息更新成功！');\r\n      \r\n      // 清空密码字段\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        currentPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      }));\r\n  \r\n      // 显示成功消息\r\n      alert('保存成功！');\r\n    } catch (error) {\r\n      setMessage(error.message);\r\n      alert(error.message || '保存失败，请重试');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      <Paper className={classes.paper}>\r\n        <Typography variant=\"h5\" className={classes.title}>\r\n          账户设置\r\n        </Typography>\r\n        <form onSubmit={handleSubmit} className={classes.form}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                name=\"username\"\r\n                label=\"用户名\"\r\n                value={formData.username}\r\n                onChange={handleChange}\r\n                fullWidth\r\n                required\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                name=\"email\"\r\n                label=\"邮箱\"\r\n                type=\"email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                fullWidth\r\n                required\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"subtitle1\" gutterBottom>\r\n                修改密码（如不修改请留空）\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                name=\"currentPassword\"\r\n                label=\"当前密码\"\r\n                type=\"password\"\r\n                value={formData.currentPassword}\r\n                onChange={handleChange}\r\n                fullWidth\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                name=\"newPassword\"\r\n                label=\"新密码\"\r\n                type=\"password\"\r\n                value={formData.newPassword}\r\n                onChange={handleChange}\r\n                fullWidth\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                name=\"confirmPassword\"\r\n                label=\"确认新密码\"\r\n                type=\"password\"\r\n                value={formData.confirmPassword}\r\n                onChange={handleChange}\r\n                fullWidth\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          \r\n          {message && (\r\n            <Box className={classes.message}>\r\n              <Typography color={message.includes('成功') ? 'primary' : 'error'}>\r\n                {message}\r\n              </Typography>\r\n            </Box>\r\n          )}\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submitButton}\r\n            disabled={loading}\r\n          >\r\n            {loading ? '保存中...' : '保存修改'}\r\n          </Button>\r\n        </form>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default AccountSettings;","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  makeStyles,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Box,\r\n  Chip,\r\n  Divider,\r\n  CircularProgress,\r\n  Button,\r\n} from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ShoppingBasketIcon from '@material-ui/icons/ShoppingBasket';\r\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  pageTitle: {\r\n    fontWeight: 600,\r\n    marginBottom: theme.spacing(4),\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: theme.spacing(1),\r\n    '& svg': {\r\n      color: theme.palette.primary.main,\r\n    },\r\n  },\r\n  card: {\r\n    display: 'flex',\r\n    marginBottom: theme.spacing(2),\r\n    borderRadius: theme.spacing(2),\r\n    boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\r\n    transition: 'all 0.3s ease',\r\n    '&:hover': {\r\n      transform: 'translateY(-4px)',\r\n      boxShadow: '0 8px 16px rgba(0,0,0,0.12)',\r\n    },\r\n  },\r\n  cardMedia: {\r\n    width: 160,\r\n    height: 160,\r\n    objectFit: 'cover',\r\n    borderRadius: theme.spacing(1),\r\n    margin: theme.spacing(2),\r\n  },\r\n  cardContent: {\r\n    flex: 1,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    padding: theme.spacing(2),\r\n  },\r\n  orderInfo: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'flex-start',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  price: {\r\n    color: theme.palette.error.main,\r\n    fontWeight: 700,\r\n    fontSize: '1.25rem',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: theme.spacing(0.5),\r\n  },\r\n  priceIcon: {\r\n    fontSize: '1rem',\r\n    color: theme.palette.error.light,\r\n  },\r\n  status: {\r\n    marginLeft: 'auto',\r\n  },\r\n  orderTime: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: theme.spacing(0.5),\r\n    color: theme.palette.text.secondary,\r\n    fontSize: '0.875rem',\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  title: {\r\n    fontWeight: 500,\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  loadingContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    minHeight: 400,\r\n  },\r\n  emptyContainer: {\r\n    textAlign: 'center',\r\n    padding: theme.spacing(4),\r\n    backgroundColor: theme.palette.background.paper,\r\n    borderRadius: theme.spacing(2),\r\n    marginTop: theme.spacing(4),\r\n  },\r\n  actionButton: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction OrderPage() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // 添加token检查\r\n      const token = localStorage.getItem('token');\r\n      console.log('当前token:', token);\r\n  \r\n      const response = await fetch('http://localhost:5000/api/orders', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n  \r\n      // 添加响应状态检查\r\n      console.log('响应状态:', response.status);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('获取订单失败');\r\n      }\r\n  \r\n      const data = await response.json();\r\n      console.log('获取到的订单数据:', data);  // 查看完整的返回数据\r\n      setOrders(data);\r\n    } catch (error) {\r\n      console.error('获取订单失败:', error);\r\n      setOrders([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusChip = (status) => {\r\n    const statusMap = {\r\n      pending: { label: '待付款', color: 'default' },\r\n      paid: { label: '已付款', color: 'primary' },\r\n      shipped: { label: '已发货', color: 'info' },\r\n      completed: { label: '已完成', color: 'success' },\r\n      cancelled: { label: '已取消', color: 'error' },\r\n    };\r\n\r\n    const statusInfo = statusMap[status] || { label: '未知状态', color: 'default' };\r\n    return (\r\n      <Chip\r\n      size=\"small\"\r\n      label=\"已付款\"  // 直接显示\"已付款\"\r\n      color=\"primary\"  // 使用主色调\r\n      className={classes.statusChip}\r\n      />\r\n    );\r\n  };\r\n\r\n  const handleItemClick = (itemId) => {\r\n    history.push(`/items/${itemId}`);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className={classes.loadingContainer}>\r\n        <CircularProgress />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      <Typography variant=\"h5\" className={classes.pageTitle}>\r\n        <ShoppingBasketIcon />\r\n        我的订单\r\n      </Typography>\r\n\r\n      {loading ? (\r\n      <Box className={classes.loadingContainer}>\r\n        <CircularProgress />\r\n      </Box>\r\n    ) : orders.length > 0 ? (\r\n      orders.map((order) => (\r\n        <Card key={order._id} className={classes.card}>\r\n          {/* 根据商品是否存在显示不同的内容 */}\r\n          {order.item ? (\r\n            // 商品存在时显示正常信息\r\n            <>\r\n              <CardMedia\r\n                className={classes.cardMedia}\r\n                image={order.item.image ? `http://localhost:5000${order.item.image}` : '/default-item-image.jpg'}\r\n                title={order.item.title}\r\n                onClick={() => handleItemClick(order.item._id)}\r\n              />\r\n              <CardContent className={classes.cardContent}>\r\n                <Box className={classes.orderInfo}>\r\n                  <Typography variant=\"h6\" className={classes.title}>\r\n                    {order.item.title}\r\n                  </Typography>\r\n                  <Chip\r\n                    label=\"已付款\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                    className={classes.statusChip}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  {order.item.description}\r\n                </Typography>\r\n                <Typography className={classes.price}>\r\n                  <LocalOfferIcon className={classes.priceIcon} />\r\n                  ¥ {order.item.price?.toLocaleString()}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"textSecondary\">\r\n                  下单时间: {new Date(order.createdAt).toLocaleString()}\r\n                </Typography>\r\n              </CardContent>\r\n            </>\r\n          ) : (\r\n            // 商品已删除时显示下架信息\r\n            <CardContent className={classes.cardContent}>\r\n              <Box className={classes.orderInfo}>\r\n                <Typography variant=\"h6\" className={classes.title} style={{ color: '#999' }}>\r\n                  商品已下架\r\n                </Typography>\r\n                <Chip\r\n                  label=\"已付款\"\r\n                  color=\"primary\"\r\n                  size=\"small\"\r\n                  className={classes.statusChip}\r\n                />\r\n              </Box>\r\n              \r\n              <Typography variant=\"caption\" color=\"textSecondary\">\r\n                下单时间: {new Date(order.createdAt).toLocaleString()}\r\n              </Typography>\r\n            </CardContent>\r\n          )}\r\n        </Card>\r\n      ))\r\n    ) : (\r\n      <Box className={classes.emptyContainer}>\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          暂无订单\r\n        </Typography>\r\n        <Typography color=\"textSecondary\" gutterBottom>\r\n          去发现更多好物吧！\r\n        </Typography>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          className={classes.actionButton}\r\n          onClick={() => history.push('/')}\r\n        >\r\n          浏览商品\r\n        </Button>\r\n      </Box>\r\n    )}\r\n  </Container>\r\n  );\r\n}\r\n\r\nexport default OrderPage;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  Avatar,\r\n  TextField,\r\n  Button,\r\n  Box,\r\n  makeStyles,\r\n  Badge\r\n} from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    marginTop: theme.spacing(4),\r\n    display: 'flex',\r\n    gap: theme.spacing(2),\r\n  },\r\n  userList: {\r\n    width: '30%',\r\n    minWidth: 250,\r\n  },\r\n  chatBox: {\r\n    flex: 1,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  messageList: {\r\n    flex: 1,\r\n    minHeight: 400,\r\n    maxHeight: 600,\r\n    overflowY: 'auto',\r\n    padding: theme.spacing(2),\r\n    backgroundColor: '#f5f5f5',\r\n  },\r\n  messageInput: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  myMessage: {\r\n    backgroundColor: '#FF7B7B',\r\n    color: 'white',\r\n    padding: '8px 12px',\r\n    borderRadius: '4px',\r\n    display: 'inline-block',\r\n    marginLeft: 'auto',\r\n    marginBottom: '2px',\r\n    fontSize: '14px',\r\n    whiteSpace: 'pre-wrap',\r\n  },\r\n  otherMessage: {\r\n    backgroundColor: 'white',\r\n    color: 'black',\r\n    padding: '8px 12px',\r\n    borderRadius: '4px',\r\n    display: 'inline-block',\r\n    marginRight: 'auto',\r\n    marginBottom: '2px',\r\n    fontSize: '14px',\r\n    whiteSpace: 'pre-wrap',\r\n  },\r\n  messageTime: {\r\n    fontSize: '12px',\r\n    color: '#999',\r\n    marginTop: '4px',\r\n  }\r\n}));\r\n\r\nfunction Messages() {\r\n  const classes = useStyles();\r\n  const { user } = useAuth();\r\n  const messagesEndRef = useRef(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [unreadCounts,setUnreadMessages] = useState({});\r\n\r\n  // 获取用户列表\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:5000/api/users', {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        const data = await response.json();\r\n        setUsers(data.filter(u => u._id !== user.id));\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n      }\r\n    };\r\n    fetchUsers();\r\n  }, [user.id]);\r\n\r\n  // 在选择用户时标记消息为已读\r\nuseEffect(() => {\r\n    if (selectedUser) {\r\n      // 获取消息\r\n      const fetchMessages = async () => {\r\n        try {\r\n          const response = await fetch(`http://localhost:5000/api/messages/${selectedUser._id}`, {\r\n            headers: {\r\n              'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n          const data = await response.json();\r\n          setMessages(data);\r\n          \r\n          // 标记为已读\r\n          await fetch(`http://localhost:5000/api/messages/read/${selectedUser._id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n        } catch (error) {\r\n          console.error('Error:', error);\r\n        }\r\n      };\r\n      fetchMessages();\r\n    }\r\n  }, [selectedUser]);\r\n\r\n  // 发送消息\r\n  const handleSendMessage = async () => {\r\n    if (!newMessage.trim() || !selectedUser) return;\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/messages', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({\r\n          receiverId: selectedUser._id,\r\n          content: newMessage.trim()\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (response.ok) {\r\n        setMessages(prevMessages => [...prevMessages, data]);\r\n        setNewMessage('');\r\n      } else {\r\n        alert(data.message || '发送失败');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      alert('发送失败，请重试');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      {/* 用户列表 */}\r\n      <Paper className={classes.userList}>\r\n        <List>\r\n          {users.map((u) => (\r\n            <ListItem \r\n              button \r\n              key={u._id}\r\n              selected={selectedUser?._id === u._id}\r\n              onClick={() => setSelectedUser(u)}\r\n            >\r\n              <ListItemAvatar>\r\n              <Badge \r\n      badgeContent={unreadCounts[u._id] > 0 ? unreadCounts[u._id] : null}\r\n      color=\"secondary\"\r\n      overlap=\"circular\"\r\n      anchorOrigin={{\r\n        vertical: 'top',\r\n        horizontal: 'right',\r\n      }}\r\n    >\r\n                <Avatar>{u.username[0]}</Avatar>\r\n                </Badge>\r\n              </ListItemAvatar>\r\n             \r\n              <ListItemText \r\n    primary={\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <Typography>{u.username}</Typography>\r\n        {unreadCounts[u._id] > 0 && (\r\n          <Box \r\n            ml={1} \r\n            bgcolor=\"secondary.main\" \r\n            color=\"white\" \r\n            px={1} \r\n            borderRadius=\"10px\"\r\n            fontSize=\"12px\"\r\n          >\r\n            {unreadCounts[u._id]}\r\n          </Box>\r\n        )}\r\n      </Box>\r\n    }\r\n  />\r\n</ListItem>\r\n          ))}\r\n        </List>\r\n      </Paper>\r\n\r\n      {/* 聊天区域 */}\r\n      <Paper className={classes.chatBox}>\r\n        {selectedUser ? (\r\n          <>\r\n            <Box p={2}>\r\n              <Typography variant=\"h6\">\r\n                与 {selectedUser.username} 的对话\r\n              </Typography>\r\n            </Box>\r\n            <Box className={classes.messageList}>\r\n            {messages.map((message) => {\r\n    // 确保正确判断消息发送者\r\n    const isMyMessage = message.sender === user.id || message.sender?._id === user.id;\r\n    \r\n    return (\r\n      <Box\r\n        key={message._id}\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: isMyMessage ? 'flex-end' : 'flex-start',\r\n        }}\r\n      >\r\n        <Box\r\n          className={isMyMessage ? classes.myMessage : classes.otherMessage}\r\n        >\r\n          {message.content}\r\n        </Box>\r\n        <Typography \r\n          className={classes.messageTime}\r\n          style={{\r\n            alignSelf: isMyMessage ? 'flex-end' : 'flex-start'\r\n          }}\r\n        >\r\n          {new Date(message.createdAt).toLocaleString()}\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  })}\r\n              <div ref={messagesEndRef} />\r\n            </Box>\r\n            <Box className={classes.messageInput}>\r\n              <TextField\r\n                fullWidth\r\n                multiline\r\n                rows={2}\r\n                variant=\"outlined\"\r\n                placeholder=\"输入消息...\"\r\n                value={newMessage}\r\n                onChange={(e) => setNewMessage(e.target.value)}\r\n                onKeyPress={(e) => {\r\n                  if (e.key === 'Enter' && !e.shiftKey) {\r\n                    e.preventDefault();\r\n                    handleSendMessage();\r\n                  }\r\n                }}\r\n              />\r\n              <Box mt={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleSendMessage}\r\n                  disabled={!newMessage.trim()}\r\n                >\r\n                  发送\r\n                </Button>\r\n              </Box>\r\n            </Box>\r\n          </>\r\n        ) : (\r\n          <Box p={4} textAlign=\"center\">\r\n            <Typography color=\"textSecondary\">\r\n              选择一个用户开始聊天\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Messages;","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport { AuthProvider } from './context/AuthContext';\nimport Profile from './components/Profile/Profile';\nimport Navbar from './components/Layout/Navbar';\nimport Home from './components/Home/Home';\nimport Login from './components/Auth/Login';\nimport Register from './components/Auth/Register';\nimport ItemForm from './components/Items/ItemForm';\nimport ItemDetail from './components/Items/ItemDetail';\nimport FavoritesList from './components/Favorites/FavoritesList';\nimport Cart from './components/Cart/Cart';\nimport DiscoverPage from './components/Discover/DiscoverPage';\nimport AccountSettings from './components/Profile/AccountSettings';\nimport MyPurchasedItems from './components/Items/MyPurchasedItems';\nimport Messages from './components/Messages/Messages';\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#ff7875', // 更活泼的红色主题\n      light: '#ff7875',\n      dark: '#cf1322',\n    },\n    secondary: {\n      main: '#722ED1',\n      light: '#9254DE',\n      dark: '#531DAB',\n    },\n    background: {\n      default: '#FAFAFA',\n      paper: '#FFFFFF',\n    },\n    text: {\n      primary: '#1A1A1A',\n      secondary: '#666666',\n    },\n  },\n  typography: {\n    fontFamily: [\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n    ].join(','),\n    h1: {\n      fontWeight: 600,\n      letterSpacing: '-0.5px',\n    },\n    h2: {\n      fontWeight: 600,\n      letterSpacing: '-0.5px',\n    },\n    h3: {\n      fontWeight: 600,\n      letterSpacing: '-0.5px',\n    },\n    h4: {\n      fontWeight: 600,\n    },\n    h5: {\n      fontWeight: 600,\n    },\n    h6: {\n      fontWeight: 600,\n    },\n    subtitle1: {\n      fontSize: '1rem',\n      fontWeight: 500,\n    },\n    subtitle2: {\n      fontSize: '0.875rem',\n      fontWeight: 500,\n    },\n    body1: {\n      fontSize: '1rem',\n      lineHeight: 1.5,\n    },\n    body2: {\n      fontSize: '0.875rem',\n      lineHeight: 1.5,\n    },\n    button: {\n      textTransform: 'none',\n      fontWeight: 500,\n    },\n  },\n  shape: {\n    borderRadius: 8,\n  },\n  shadows: [\n    'none',\n    '0 1px 2px rgba(0,0,0,0.06)',\n    '0 1px 3px rgba(0,0,0,0.1)',\n    '0 2px 4px rgba(0,0,0,0.12)',\n    '0 3px 6px rgba(0,0,0,0.15)',\n    '0 4px 8px rgba(0,0,0,0.16)',\n    '0 6px 12px rgba(0,0,0,0.18)',\n    // ... 其他阴影保持默认\n  ],\n  overrides: {\n    MuiButton: {\n      root: {\n        borderRadius: 25,\n        padding: '6px 16px',\n      },\n      contained: {\n        boxShadow: 'none',\n        '&:hover': {\n          boxShadow: '0 2px 6px rgba(0,0,0,0.12)',\n        },\n      },\n    },\n    MuiPaper: {\n      rounded: {\n        borderRadius: 12,\n      },\n      elevation1: {\n        boxShadow: '0 1px 3px rgba(0,0,0,0.08)',\n      },\n    },\n    MuiCard: {\n      root: {\n        borderRadius: 12,\n        boxShadow: '0 1px 3px rgba(0,0,0,0.08)',\n      },\n    },\n  },\n});\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <AuthProvider>\n        <Router>\n          <Navbar />\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/register\" component={Register} />\n            <Route path=\"/items/new\" component={ItemForm} />\n            <Route path=\"/profile\" component={Profile} /> \n            <Route path=\"/items/:id\" component={ItemDetail} />\n            <Route path=\"/favorites\" component={FavoritesList} />\n            <Route path=\"/cart\" component={Cart} />\n            <Route path=\"/discover\" component={DiscoverPage} />\n            <Route path=\"/my-items\" component={MyPurchasedItems} />\n            <Route path=\"/messages\" component={Messages} />\n<Route path=\"/account/settings\" component={AccountSettings} />\n          </Switch>\n        </Router>\n      </AuthProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}